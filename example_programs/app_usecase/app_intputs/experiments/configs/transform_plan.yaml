experiments:
  E0_same_temp:
    description: Homogeneous shards at identical temperature; DeepTICA should succeed with uniform weights.
    data:
      shards_glob: "../same_temp_shards/shard_*.json"
      reference_manifest: "../same_temp_shards/manifest.yaml"
    seeds:
      global: 90210
      shuffle: 90211
      deeptica: 90212
    preprocessing:
      center: true
      scale: true
      whitening: false
      drop_nan: true
    deeptica:
      enabled: true
      lag_fallback: [6, 5, 4, 3]
      min_pairs: 2500
      train:
        epochs: 80
        patience: 12
        batch_size: 256
        learning_rate: 5.0e-4
      validation:
        split_fraction: 0.15
        stride: 2
      export:
        max_components: 3
        store_latent: true
    outputs:
      artifact_prefix: "same_temp"
      save_debug_bundle: true

  E1_mixed_ladders:
    description: Overlapping temperature ladders; TRAM/MBAR reweighting expected to converge.
    data:
      shards_glob: "../mixed_ladders_shards/shard_*.json"
      reference_manifest: "../mixed_ladders_shards/manifest.yaml"
    seeds:
      global: 91337
      shuffle: 91338
      deeptica: 91339
    preprocessing:
      center: true
      scale: true
      whitening: true
      drop_nan: true
    deeptica:
      enabled: true
      lag_fallback: [8, 6, 5, 4]
      min_pairs: 4000
      train:
        epochs: 100
        patience: 15
        batch_size: 256
        learning_rate: 4.0e-4
      validation:
        split_fraction: 0.2
        stride: 3
      export:
        max_components: 4
        store_latent: true
    outputs:
      artifact_prefix: "mixed_ladders"
      save_debug_bundle: true

  E2_disjoint_ladders:
    description: Disjoint ladders; pipeline should exit early when reweighting fails.
    data:
      shards_glob: "../disjoint_ladders_shards/shard_*.json"
      reference_manifest: "../disjoint_ladders_shards/manifest.yaml"
    seeds:
      global: 92464
      shuffle: 92465
      deeptica: 92466
    preprocessing:
      center: true
      scale: true
      whitening: true
      drop_nan: true
    deeptica:
      enabled: true
      lag_fallback: [6, 5, 4]
      min_pairs: 3500
      skip_on_failure: true
      train:
        epochs: 80
        patience: 10
        batch_size: 256
        learning_rate: 5.0e-4
      validation:
        split_fraction: 0.2
        stride: 3
      export:
        max_components: 4
        store_latent: true
    outputs:
      artifact_prefix: "disjoint_ladders"
      save_debug_bundle: true
